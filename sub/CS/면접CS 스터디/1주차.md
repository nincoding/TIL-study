## 2023.01.26.목

134p ~ 147p

# 1. 운영체제가 하는 역할

운영체제의 역할은 크게 4가지가 있습니다.

첫째. CPU 스케줄링과 프로세스를 관리합니다.

CPU를 어떤 프로세스에 할당 할 지, 프로세스의 생성과 삭제, 그리고 프로세스에 자원을 할당하고 반환하는 작업을 수행합니다.

둘째. 메모리를 관리합니다. 한정된 메모리를 어떤 프로세스에 얼마큼 할당해야 할지를 관리합니다.

셋째. 디스크의 파일을 관리합니다.

넷째. 마우스나 키보드와 같은 I/O 디바이스 간 데이터를 주고받는것을 관리합니다.

# 2. 시스템 콜이란?

시스템 콜이란 유저 프로그램이 운영체제 커널에 명령을 내리기 위해 사용하는 인터페이스 입니다. 만약 유저 프로그램에서 fs.readfile 과 같은 명령을 실행하면 유저모드에서 커널모드로 들어가 파일을 읽고 다시 유저모드에서 읽어온 파일을 가지고 처리합니다. 이러한 유저모드와 커널모드의 구분을 통해 컴퓨터 자원에 대한 직접 접근을 차단 할수 있습니다.

## 2.1 modebit이란?

시스템콜이 작동될 때 유저모드와 커널모드를 구분하기 위해 사용되는 0과 1 값을 갖는 플래그 변수입니다.

만약 노트북의 카메라를 켜는 기능이 유저모드에서 실행된다면 사용자가 의도치 않았는데 해커가 카메라를 갑자기 켜는 등 나쁜짓을 하기가 쉽습니다. 따라서 이러한 자원에 대한 처리는 커널모드에서만 수행하도록 유저모드와 커널모드로 구분을 해두었는데 이를 구분하는 값이 modebit입니다. modebit 값이 1이면 유저모드 0이면 커널모드입니다.

## 2.2 I/O 요청이란?

fs.readfile 과 같이 파일을 읽어오거나, 입출력함수의 실행, 데이터베이스나, 네트워크 요청 등에 관한 요청을 의미합니다.

## 2.3 드라이버란?

하드웨어를 제어하기 위한 소프트웨어입니다. 운영체제에서는 하드웨어 기종 마다 제어를 위한 시스템을 미리 설치해둘수 없기 때문에 제조사에서 이러한 드라이버를 다운받아 설치해야 합니다.

## 2.4 유저모드와 커널모드란?

유저 프로그램이 접근 가능한 영역과 커널에 접근해 모든 컴퓨터 자원에 접근가능한 영역을 분리한것을 의미합니다.

## 2.5 커널이란?

커널은 운영체제의 핵심 부분을 말합니다. 운영체제의 역할 중 메모리관리, 프로세스 스케줄링, 자원할당과 I/O처리 등의 중추적인 역할을 수행합니다.

# 3. CPU와 CPU의 구성요소

CPU란 메모리에 존재하는 명령어를 해석해서 실제 작업을 수행하는 일꾼입니다.

CPU는 제어장치, 레지스터, 산술논리연산장치(ALU)로 구성됩니다.

제어장치는 실제 프로세스 조작을 지시하는 CPU의 한 부품입니다. 데이터처리를 위한 순서를 결정합니다.

레지스터는 CPU안에 있는 매우 빠른 저장 장치를 의미합니다. CPU에서는 연산에 사용되는 데이터를 이 레지스터에 저장해 두었다가 연산작업을 수행합니다.

산술논리연산장치는 실제 CPU의 연산 작업이 일어나는 부분입니다.

실제 계산이 일어나는 예를 들어 설명 해보면 제어장치가 메모리와 레지스터에 계산할 값을 로드한 후 산술논리연산장치에 계산 명령을 내립니다. 그러면 산술 논리 연산장치는 레지스터에 등록된 값을 가지고 계산을 수행합니다. 계산이 완료되면 제어장치는 레지스터에 저장된 결과 값을 다시 메모리에 저장합니다.

# 4. 인터럽트란?

인터럽트는 어떤 신호가 들어왔을때 CPU를 잠깐 정지시키는것을 말합니다. 인터럽트는 보통 키보드, 마우스, 입출력 과같은 I/O작업을 만났을때 하드웨어 인터럽트가, 혹은 프로세스에서 에러가 발생했을 때 소프트웨어 인터럽트가 일어납니다.

## 4.1 "인터럽트 핸들러 함수”란?

**인터럽트가 발생했을 때 이를 핸들링 하기 위한 함수입니다.** 인터럽트가 발생해 지정한 인터럽트 핸들러 함수가 동작하게 하려면 request_irq() 함수를 적절한 인자와 함께 호출해서 미리 인터럽트 핸들러를 등록해 주어야 합니다.

자바스크립트 → 노드 / 브라우저(프로그램) → “시스템 콜” 에러 핸들링 → 커널 에러

# 5. DMA 컨트롤러란?

DMA 컨트롤러는 I/O 디바이스가 메모리에 직접 접근할수 있도록 하는 하드웨어 장치입니다. I/O 장치로부터 CPU에 너무 많은 인터럽트 요청이 들어오는것을 막아주기 위해 CPU의 일을 분담해주는 보조 일꾼입니다.

# 6. 메모리란?

보통 RAM이라고도 하며, CPU는 데이터의 계산을 담당한다면 RAM은 데이터의 기억을 담당합니다.

RAM 용량이 클수록 더 많은 프로세스를 동시에 실행 시킬 수 있습니다.

# 7. 타이머란?

타이머는 몇초 안에 끝나야 하는 작업들을 지정하고 시간을 제한하는 역할을 합니다.

자바스크립트 setTimeout → 브라우저 / 노드 → 시스템콜 → 커널의 타이머 조작

# 8. 디바이스 컨트롤러란?

마우스나 키보드 안에 들어있는 작은 CPU를 말합니다.

# 9. 메모리 계층(종류)\*

메모리계층은 속도가 빠른 순서대로 레지스터, 캐시, 주기억장치(RAM), 보조기억장치(HDD, SSD)로 구분됩니다.

## 9.1 캐시 메모리와 특징

캐시는 속도가 빠른장치와 느린장치 사이의 속도 차이에 의한 병목현상을 줄이기 위해 데이터를 미리 복사해 놓는 임시 저장소를 말합니다.

CPU의 처리속도가 메모리에 데이터를 올리고 읽는 속도보다 빠르기 때문에 이 사이에 중간 계층인 캐시 계층을 마련해두고 CPU와 메모리간 속도차이를 해결합니다.

**캐시 메모리에서는 지역성의 원리가 중요**합니다. 지역성의 원리란? 어떤 데이터를 캐싱해둘지에 대한 기준입니다.

최근 사용한 데이터를 위주로 캐싱해두는 시간 지역성과, 배열과 같이 인접한 데이터를 미리 캐싱해 두는 **공간지역성**이 있습니다.

## 9.2 캐시 히트와 캐시 미스란?

캐시 히트, 캐시 미스는 캐싱된 데이터를 꺼내올때 사용되는 말 입니다.

만약 요청하는 데이터가 이미 캐싱된 상태라 바로 꺼내 올 수있으면 캐시 히트, 요청하는 데이터가 캐싱되어있지 않아 다시 메모리에서 찾아와야 하는 상황이라면 캐시 미스라고 합니다.

## 9.3 캐시 매핑(사상, 연결한다.)이란?

캐시메모리는 RAM 보다 용량이 작습니다. 캐시 히트를 판정하기 위해 이 두 메모리 간 데이터를 매핑하는 방법을 말합니다.

직접매핑, 연관매핑, 집합 연관 매핑 이 있습니다.

직접매핑이란 메모리가 1부터 100까지, 캐시가 1부터 10까지 있다고 하면 메모리의 1부터10이 캐시에 1에 해당한다 이런식으로 매핑하는것을 말합니다. 처리가 빠르지만 캐시충돌 발생이 자주일어날수있습니다.

연관 매핑이란 순서에 상관없이 캐시메모리에 캐싱할때 주기억장치의 주소도 함께 저장하는 방식입니다. 주소로 바로 접근하기 때문에 캐시 충돌이 적지만 속도가 느립니다.

집합 연관 매핑 : 직접 매핑 방식과 연관 매핑방식을 혼합한 방식입니다. 예를들어 메모리가 1부터 100까지, 캐시가 1부터 10까지 있다고 하면 캐시 1~5에는 1~50 사이의 데이터를 무작위로 저장시키는것을 말합니다.

# 10. 웹브라우저의 “쿠키”와 “로컬스토리지” “세션스토리지” \*\*

먼저 쿠키는 만료기한이 있는 키밸류 저장소입니다. 브라우저에 각 쿠키는 4KB 까지의 데이터를 저장 가능하며, 서버에서 브라우저로 쿠키를 설정할 때 document.cookie로 브라우저에서 도큐먼트로 접근해 쿠키를 볼수없게 httponly 옵션을 거는 것이 중요합니다.

⇒ 팝업 다시보기 기능 해제와 같이 일시적으로 사용되는 가벼운 데이터를 저장하는데 사용할 수 있습니다.

로컬스토리지는 만료기한이 없고, 10MB까지 의 데이터를 저장 할 수 있습니다. 그리고 웹 브라우저를 닫아도 유지되고, 도메인 단위로 저장 생성 할 수 있습니다. HTML5를 지원하는 브라우저만 사용 가능하며, 자동 로그인같이 웹브라우저를 닫아도 유지되어야 하는 데이터를 저장할때 사용할수 있습니다.

세션 스토리지도 만료기한이 없고, 5MB 까지 데이터 저장이 가능하며, HTML5를 지원하는 브라우저만 사용 가능합니다 세션스토리지는 브라우저의 탭을 닫으면 해당 데이터가 삭제됩니다. 그래서 입력 폼 데이터를 저장하거나, 비로그인상태로 장바구니상품을 저장하는등 가벼운 데이터를 저장하는데 사용할 수 있습니다.
