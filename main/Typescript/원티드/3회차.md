## 동적 타입과 정적 타입

면접때 가끔 받는 질문중하나가 자바스크립트 언어에 대해 설명해보세요 라는 질문을 받는다.
만약 이런식을 받는다면 어떤 답변을 할 것 인가?

내가 자바스크립트를 자세하게 소개한다면 어떻게 할까 검색하니까

- 인터프리터 언어
- 컴파일 기반이 아니라 인터프리터를 기반으로 하는 동적인 언어이다.

세월이 흐리면서 타입스크립트가 뭔가요? 라고 하거나, 타입스크립트를 적어오는 100이면 100 적는게
동적 타입 자바스크립트를 보완하기 위해 정적 타입을 사용하는 언어입니다.라는 말을 많이 들 해온다.
하지만, 이 이상의 깊이있는 해석을 신입들은 못한다.

동적 정적까지는 아는데 그 이상의 깊이를 설명하지는 못한다.
동적타입과 정적타입은 각각 뭐가 장점이냐 할때 대부분은 대답을 못한다.
그래서 그 부분에 대해 꼭 알았으면 좋겠다.

> **타입 체커가 컴파일 타임에 수행되는지 런타임에 수행되는지 여부**

타입스크립트가 정적 타입 언어인데 컴파일 타임과 런타임을 어떻게 구분하는지 알고 있어야 한다.

- 컴파일은 ts파일 -> js파일
- 컴파일 된 이후 실제로 코드가 돌아가는 것이 런타임

혹시 이펙티브 타입스크립트나 책을 보았을때 TS서버를 이해하는게 좋다.

혹시 타입스크립트가 뻑나서 다시 돌아가본 경험이 있을까?
이게 ts서버가 뻑나서 발생한 것이다.

ts서버가 왜 있을까? 그 이유를 알아야한다.

우리가 타입스크립트로 작성된 vscode를 쓰는데, 이 ts서버를 기반으로 계속 타입체커가 돈다.

개발환경은 타입체커이고, 배포환경은 컴파일러라고도 볼 수 있는데 타입스크립트 컴파일할때 loader를 무엇을 쓰는지도 중요하다.
거의 ts-loader 쓰거나, babel-loader

- 타입체커
- 컴파일러는 개발환경, vscode에서 도는 녀석이고

- tssever는 무엇을 할까? / tsserver는 동적, 정적 어디에 속할까?
- 컴파일러는 무엇을 할까?

### 타입스크립트의 건전성

![](https://velog.velcdn.com/images/ninto_2/post/4021d0a1-300a-4278-88f4-9b2aa42acf23/image.png)

타입이 터지면 잠재우기 바쁜데,

건전함의 반대인 불건전함은 런타임에 문제를 유발할 수 있지만 타입스크립트는 일부 불건전한 동작을 허용한다.

이 말이 타입스크립트 공식문서에도 있는 특성이다.

타입스크립트 처음 공부할때 가장 많이 쓰는 타입이 바로 any 가 그 예이다.
모든 타입이 가능해라는 뜻이 아니라, 이것도 불건전한 것에 대해 일부 수용한 상황이다.

![](https://velog.velcdn.com/images/ninto_2/post/ff499447-c927-4412-b5ae-018af9c194ea/image.png)

타입타입인 as 도 사실 쓰면 안된다. 일부 불건전한 코드이다.

HTML DOM을 다룰때 단언 없이 사용할 수 있을까요..? 이 것때문에 생긴것이다.

![](https://velog.velcdn.com/images/ninto_2/post/f580073d-f145-44e2-8ea8-985fcb9809a8/image.png)

무조건 있어, 나를 믿어 하는 것이다.

위의 것들이 타입스크립트의 불건전함이다. 타입스크립트는 이런것들을 허용한다.
컴파일 타임에 알기 어려운 특정 타입을 안전하게 허용하는 것을 의미한다.

처음 타입스크립트 설명할때 모든 코드는 자바스크립트로 변환되고, 자바스크립트가 지원되는 모든 곳에서 실행된다. 이게 그 예인것 같다. 런타임에 개입하기가 어려워서 타입스크립트 개발팀이 다 안전하게 작성해 줄 것 처럼하면서 런타임은 알아서 해 라고 하는 것 이다.
리액트로 작성하는 애플리케이션에서 타입스크립트를 쓸 때 가장 많이 건전성이 떠오르는 코드가 뭐가 있을가?
불건전함을 허용하는 것 `useref` 이게 정답.
타입스크립트 컴파일러가 이걸 알 수 가 없는 것이다. if문 넣기 귀찮으면 ?. 넣어서 하는데 옵셔널 체이닝을 사용하고있다.
`!.`는 왠만해서 거의 사용하면 안된다.

그렇게 해서 쓰는 문법이 타입가드이다.
타입스크립트를 사용하는데 가장 중요한 것 중 하나라고 생각한다.

![](https://velog.velcdn.com/images/ninto_2/post/407abcb1-9bf1-4240-b163-7e6105fbc916/image.png)

왜 이 코드를 if문을 쓰는지 타입을 막는지 이유를 알아야 한다.

사용자의 입력이나 행동이 런타임에서 어떻게 들어올지 모르는 상황, number와 string이냐 둘 다 뚫어놓고 경우에 따라 형변환을 해주는 것이다.

이런 코드가 범벅이여야 런타임에 발생되는 에러가 안터진다.

![](https://velog.velcdn.com/images/ninto_2/post/767868bd-3dc9-4710-8e2f-c773553bca19/image.png)

in연산자는 자바스크립트 문법이고, sayAnimal이라는 함수가 실행될때 런타임에 어떤게 불릴지 모르는 상황이다.

```ts
interface Dog {
  name: string;
  back(): "멍멍";
}

interface Cat {
  name: string;
  meow(): "냐옹";
}

// 오류를 해결해보자.
/*
function sayAnimal(animal: Dog | Cat) {
  animal.bark()
  animal.meow()
}
*/

function sayAnimal(animal: Dog | Cat) {
  if ("bark" in animal) {
    animal.bark();
  }
  if ("meow" in animal) {
    animal.meow();
  }
}
```

내가 타입연산을 할 때 프리미티브 타입가드,
내가 타입연산을 할 때 객체를 가지고 할 경우엔 in 연산자를 쓰면된다.

instanceof도 많이 사용한다.

```ts
function getData(data: Date | string): Date {
  if (date instanceof Date) {
    return date;
  }
  return new Date(date);
}
```

is라는 문법이 나온다.

![](https://velog.velcdn.com/images/ninto_2/post/ec9eeb7f-0a35-4f5d-8915-93f93dadb932/image.png)

is라는게 전혀없다. 컴파일되면 날라가는 타입스크립트를 위한 문법이다.
is는 너무 귀찮은 것들에 대해 어느정도 공통화를 해주는 녀석이기도 하다.
약간 유틸타입 느낌이 나기도 한다.

어차피 타입가드 안쓰면 에러가 친절해서 타입가드 써야하는데? 어차피 타입가드 없이 코드 작성이 불가능하지 않나요?
그럼에도 불구하고 뭐 때문에 타입가드를 작성해야될까?

타입 단언 쓰지말고 가드로가 정답이다. Unsoundness(ts의 일부 불건전함)을 허용하는 트릭이 워낙 많아서 이다.
그걸 이해하기 위해서는 타입스크립트가 일부 불건전함을 허용하는 트릭때문에 쓰는 것이다.
약간 가스라이팅처럼 ts야 내가 너보다 타입을 더 잘알아 이건 내 코드야 이런 행위들, 코드는 정상이고 ts타입이 잘못된 줄 알고 타입을 다시 다는 경우 등..

타입스크립트가 엄격한 타입을 위해서 타입을 쓰세요, 자바스크립트를 안전하게 쓸 수 있습니다 처럼 홍보를 해놓고 백터널을 많이 뚫어놓은 것처럼 보인다.

타입가드를 쓸 때는 결국 typeof , in 연산자를 많이 쓰는데 이건 자바스크립트 문법이기 때문에 타입스크립트 관점에서 정의를 하고싶다할 때는 is 문법을 쓸수 있다는 것이다.

타입스크립트를 사용할때 3가지 방법으로 타입스크립트를 사용할 수 있다.

1. 런타임 - 타입가드 로 대응할 수 있다.

- 리액트에서 하는 방법이 또 있다! 무엇일까? Prop types, MobX는 MST라는걸 주로 쓴다.

2. IDE - tsserver (타입체커)
3. 컴파일 - TSC (loader...) // babel, esbuild, ts, 등등 다양한 로더들이 타입스크립트 코드를 자바스크립트 코드로 변환시켜주는 역할 을 한다. 이 3가지 엣지는 알고있어야한다.

타입스크립트는 왜 런타임에 타입이 결정되도록 허술하게 허용할까?

- 컴파일 시점에 알 수 없는 타입을 허용해주기 위해, 불건전성

#### Q&A

어떤 요구 사항에 맞는 기술을 선택했다라는 대답이 가장 좋다.

- PoC를 철저하게 하는게 가장 중요하다.

- TPO (개발용어 아님, time place location) 시간 장소 상황에 맞게 행동하고, 맞아야한다.
  기술 선택도 그렇고, 코드를 넣을때도 그렇고 TPO를 잘 고려하는 것이 중요하다.
  개발이라고 치면 time, project(프로젝트 요구사항), occasion 이런식으로 설명을 할 수 있다면 좋다.

코딩테스트 벼락치기는 솔직히 말해서 없고, 그 회사에 맞춰서 코딩테스트를 준비하자.
회사는 생각보다 바쁘고 면접관들과 문제를 준비하는 분들은 생각보다 더 바쁘다.
꽤나 3년간은 문제가 크게 벗어나지 않는다.
그래서 블라인드, 잡플래닛, 구글링에서 어떤 문제 어떻게 나오는지 검색해보자.
그리고 꾸준히 공부하는 부분들을 갖추자.

자바스크립트 책 추천

- 모던 자바스크립트
- 자바스크립트 완벽가이드 7판
- 코어 자바스크립트
- YDK JS
- 자바스크립트는 왜 그 모양일까?

경력서에 신입이라고 자랑하지말고 신입인걸 숨기고 작성하자.

- 성장... 공부 중... 진행 중... 수정 중... 앞으로 발전 중입니다. 이런 거 쓰지말자.
  속이자는 이야기는 아니지만 문장에 저 신입입니다 라고 자랑하지 말자.

스킬트리 별점 절대 하지말자.
배운점... 학습한 점... 회고한점... 이런거 넣지말고 차라리 성과로 바꿔적어라.
이건 방어기제이다.
차라리 에러를 해결했다는 방식으로 결과가 있는 방식으로 작성해야한다.

![](https://velog.velcdn.com/images/ninto_2/post/b611cf0a-20dc-437e-9901-36a829904331/image.png)

포트폴리오는 이렇게 명확하게 쓸 수 있어야한다.
oo 페이지 개발 하고 아래 자세히 작성 해도 되긴 한다.

서버사이드렌더링 경험을 우대하는 곳이 많은데, SSR경험이 있는 사람 거의 못봤다.
그래서 Next.js하고, getServerSideProps() 이거 2개만 하면된다.
대부분 SSG 주의인데, SSG는 CRA, Gatsby 로도 가능하다.

그리고 더 점진적으로는 리액트를 사용하지만, 첫 페이지만 SSR로 돌려보면 공부가 엄청나게 될 것 이다.

풀스택 어설프게 할 거면 차라리 JSON Server, MSW, Next.js API Route 도 좋다.

https://sudojslee.github.io/posts/2022-amazon-layoff/

https://moonheekim.notion.site/moonheekim/85216a5e02d4465c9b7effdafef66ec6

![](https://velog.velcdn.com/images/ninto_2/post/171cc8b1-7b4f-4b91-8203-e60d152eb025/image.png)
